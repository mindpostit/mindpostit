const ANTHROPIC_API_KEY = process.env.REACT_APP_ANTHROPIC_API_KEY;

// AI ì‘ë‹µ í…œí”Œë¦¿ë“¤
const responseTemplates = [
  "ë§Žì´ íž˜ë“œì…¨ê² ì–´ìš”. ì´ë ‡ê²Œ ë§ˆìŒì„ ë‚˜ëˆ ì£¼ì…”ì„œ ê°ì‚¬í•´ìš”. ì–¸ì œë“  ì—¬ê¸° ìžˆì„ê²Œìš”.",
  "ê·¸ëŸ° ë§ˆìŒ ì¶©ë¶„ížˆ ì´í•´ë¼ìš”. í˜¼ìžê°€ ì•„ë‹ˆì—ìš”, í•¨ê»˜ ìžˆì–´ì¤„ê²Œìš”.",
  "ì •ë§ ìˆ˜ê³  ë§Žìœ¼ì…¨ì–´ìš”. ë‹¹ì‹ ì˜ ë§ˆìŒì´ ì¡°ê¸ˆì´ë‚˜ë§ˆ íŽ¸ì•ˆí•´ì§€ê¸¸ ë°”ë¼ìš”.",
  "ê·¸ ê°ì • ëŠë¼ëŠ” ê±° ë‹¹ì—°í•´ìš”. ì²œì²œížˆ, ê´œì°®ì•„ìš”.",
  "íž˜ë‚´ë¼ëŠ” ë§ë³´ë‹¤, ê·¸ëƒ¥ ì˜†ì— ìžˆì–´ì¤„ê²Œìš”. ì–¸ì œë“  ì´ì•¼ê¸°í•´ìš”.",
  "ë§Žì´ ê³ ë¯¼ë˜ì…¨ì„ ê²ƒ ê°™ì•„ìš”. ë‹¹ì‹ ì˜ ë§ˆìŒì„ ì‘ì›í•´ìš”.",
  "ê·¸ëŸ° ë‚  ìžˆì£ . ì™„ì „ ê³µê°ë¼ìš”. ì˜¤ëŠ˜ í•˜ë£¨ë„ ìž˜ ë²„í‹°ì…¨ì–´ìš”.",
  "í˜¼ìž ì§Šì–´ì§€ë ¤ í•˜ì§€ ì•Šì•„ë„ ë¼ìš”. ì—¬ê¸° í•¨ê»˜ í• ê²Œìš”.",
  "íž˜ë“  í•˜ë£¨ì˜€ê² ì–´ìš”. ì´ë ‡ê²Œ í„¸ì–´ë†“ì•„ ì£¼ì…”ì„œ ê³ ë§ˆì›Œìš”.",
  "ê·¸ ë§ˆìŒ ëŠê»´ì ¸ìš”. ì²œì²œížˆ ê´œì°®ì•„ì§ˆ ê±°ì˜ˆìš”, ê°™ì´ ìžˆì„ê²Œìš”."
];

// ê°ì • í‚¤ì›Œë“œ ê¸°ë°˜ ì‘ë‹µ
const emotionResponses = {
  íž˜ë“¤: [
    "ì •ë§ íž˜ë“œì…¨ê² ì–´ìš”. ì´ë ‡ê²Œ ë§ˆìŒ ë‚˜ëˆ ì£¼ì…”ì„œ ê°ì‚¬í•´ìš”.",
    "ë§Žì´ íž˜ë“  ì‹œê°„ì„ ë³´ë‚´ê³  ê³„ì‹œë„¤ìš”. í˜¼ìžê°€ ì•„ë‹ˆì—ìš”, ì—¬ê¸° ìžˆì–´ìš”.",
    "íž˜ë“  ë§ˆìŒ ëŠê»´ì ¸ìš”. ì²œì²œížˆ ê´œì°®ì•„ì§ˆ ê±°ì˜ˆìš”."
  ],
  ì™¸ë¡­: [
    "ì™¸ë¡œìš´ ë§ˆìŒ ì¶©ë¶„ížˆ ì´í•´ë¼ìš”. ì—¬ê¸°ì„œë¼ë„ í•¨ê»˜ ìžˆì–´ì¤„ê²Œìš”.",
    "í˜¼ìžë¼ê³  ëŠê»´ì§€ì‹œë‚˜ìš”? ë‹¹ì‹  ê³ì— ìžˆì–´ì¤„ê²Œìš”.",
    "ì™¸ë¡œì›€ë„ ì†Œì¤‘í•œ ê°ì •ì´ì—ìš”. í•¨ê»˜ ë‚˜ëˆ ìš”."
  ],
  ìŠ¬í”„: [
    "ìŠ¬í”ˆ ë§ˆìŒ ëŠê»´ì ¸ìš”. ê´œì°®ì•„ìš”, ì¶©ë¶„ížˆ ìŠ¬í¼í•´ë„ ë¼ìš”.",
    "ë§Žì´ ìŠ¬í”„ì…¨ê² ì–´ìš”. ì´ë ‡ê²Œ í‘œí˜„í•´ì£¼ì…”ì„œ ë‹¤í–‰ì´ì—ìš”.",
    "ìŠ¬í””ë„ ë‹¹ì‹ ì˜ ì¼ë¶€ì˜ˆìš”. ì²œì²œížˆ ëŠê»´ë³´ì„¸ìš”."
  ],
  í™”ë‚˜: [
    "í™”ë‚˜ëŠ” ë§ˆìŒ ë‹¹ì—°í•´ìš”. ê·¸ ê°ì • ì¶©ë¶„ížˆ ì´í•´ë¼ìš”.",
    "í™”ê°€ ë‚¬ë˜ ì¼ì´ ìžˆì—ˆêµ°ìš”. ê·¸ëŸ´ ìˆ˜ ìžˆì–´ìš”, ê´œì°®ì•„ìš”.",
    "í™”ë‚´ë„ ê´œì°®ì•„ìš”. ê·¸ ê°ì •ì„ ì¸ì •í•´ì£¼ì„¸ìš”."
  ],
  ë¶ˆì•ˆ: [
    "ë¶ˆì•ˆí•œ ë§ˆìŒ ëŠê»´ì ¸ìš”. ì²œì²œížˆ í˜¸í¡í•˜ë©° í•¨ê»˜í•´ìš”.",
    "ë¶ˆì•ˆê°ì´ í¬ì‹œêµ°ìš”. ê´œì°®ì•„ìš”, ì´ ìˆœê°„ë„ ì§€ë‚˜ê°ˆ ê±°ì˜ˆìš”.",
    "ë¶ˆì•ˆí•´í•˜ëŠ” ë‹¹ì‹ ì˜ ë§ˆìŒì„ ì´í•´í•´ìš”. í•¨ê»˜ ìžˆì„ê²Œìš”."
  ],
  í”¼ê³¤: [
    "ë§Žì´ í”¼ê³¤í•˜ì…¨ê² ì–´ìš”. ì˜¤ëŠ˜ í•˜ë£¨ë„ ê³ ìƒ ë§Žìœ¼ì…¨ì–´ìš”.",
    "ì§€ì¹œ ë§ˆìŒ ëŠê»´ì ¸ìš”. ì¶©ë¶„ížˆ ì‰¬ì–´ê°€ì„¸ìš”.",
    "í”¼ê³¤í•œ ë‚ ì´ë„¤ìš”. ìž˜ ë²„í…¨ë‚´ê³  ê³„ì‹œëŠ” ê±°ì˜ˆìš”."
  ],
  ê³ ë¯¼: [
    "ë§Žì´ ê³ ë¯¼ë˜ì‹œë‚˜ë´ìš”. ì²œì²œížˆ ìƒê°í•´ë´ë„ ê´œì°®ì•„ìš”.",
    "ê³ ë¯¼í•˜ëŠ” ë§ˆìŒ ëŠê»´ì ¸ìš”. í•¨ê»˜ ìƒê°í•´ë´ìš”.",
    "ê³ ë¯¼ì´ ë§Žìœ¼ì‹œêµ°ìš”. ì„œë‘ë¥´ì§€ ì•Šì•„ë„ ë¼ìš”."
  ]
};

// í‚¤ì›Œë“œ ê¸°ë°˜ ì‘ë‹µ ì„ íƒ
const getResponseByKeyword = (text) => {
  for (const [keyword, responses] of Object.entries(emotionResponses)) {
    if (text.includes(keyword)) {
      return responses[Math.floor(Math.random() * responses.length)];
    }
  }
  return responseTemplates[Math.floor(Math.random() * responseTemplates.length)];
};

// AI ì‘ë‹µ ìƒì„± í•¨ìˆ˜ (Mock ë²„ì „)
export const generateAIResponse = async (userPost) => {
  console.log('ðŸ¤– ë“¤ë¦¼ì´ ì‘ë‹µ ìƒì„± ì¤‘...', userPost);
  
  try {
    // ìžì—°ìŠ¤ëŸ¬ìš´ ëŠë‚Œì„ ìœ„í•´ ì§§ì€ ë”œë ˆì´
    await new Promise(resolve => setTimeout(resolve, 500));
    
    // í‚¤ì›Œë“œ ê¸°ë°˜ ì‘ë‹µ ì„ íƒ
    const message = getResponseByKeyword(userPost);
    
    console.log('âœ… ë“¤ë¦¼ì´ ì‘ë‹µ:', message);
    
    return {
      success: true,
      message: message
    };
    
    /* 
    // ë‚˜ì¤‘ì— ë°±ì—”ë“œ ì„œë²„ êµ¬ì¶• í›„ ì´ ì½”ë“œ ì‚¬ìš©:
    const response = await fetch('YOUR_BACKEND_URL/api/ai-response', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        userPost: userPost,
        apiKey: ANTHROPIC_API_KEY
      })
    });
    
    const data = await response.json();
    return {
      success: true,
      message: data.message
    };
    */
  } catch (error) {
    console.error('âŒ ì‘ë‹µ ìƒì„± ì˜¤ë¥˜:', error);
    return {
      success: true, // ì—ëŸ¬ì—¬ë„ ê¸°ë³¸ ì‘ë‹µ ì œê³µ
      message: 'ë§ˆìŒì„ ë‚˜ëˆ ì£¼ì…”ì„œ ê°ì‚¬í•´ìš”. ì–¸ì œë“  ì´ì•¼ê¸°í•´ì£¼ì„¸ìš”.'
    };
  }
};

// ëžœë¤ ëŒ€ê¸° ì‹œê°„ (ìžì—°ìŠ¤ëŸ¬ì›€ì„ ìœ„í•´)
export const getRandomDelay = () => {
  return Math.floor(Math.random() * 3000) + 2000; // 2-5ì´ˆ
};